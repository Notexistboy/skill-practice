<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /* 
            在出现 nums[i] < nums[i - 1] 时，需要考虑的是应该修改数组的哪个数，使得本次修改能使 i 之前的数组成为非递减数组，并且 不影响后续的操作 。
            优先考虑令 nums[i - 1]=nums[i]，因为如果修改 nums[i]=nums[i - 1] 的话，那么 nums[i] 这个数会变大，就有可能比 nums[i + 1] 大，从而影响了后续操作。
            还有一个比较特别的情况就是nums[i] < nums[i - 2]，修改 nums[i - 1]=nums[i] 不能使数组成为非递减数组，只能修改 nums[i]=nums[i - 1]。
         */
        /**
         * @param {number[]} nums
         * @return {boolean}
         */
        var checkPossibility = function (nums) {
            let change = 0;
            for (let i = 1; i < nums.length && change < 2; i++) {
                if (nums[i] >= nums[i - 1]) {
                    continue;
                }
                change++;
                if (i >= 2 && nums[i] < nums[i - 2]) {
                    nums[i] = nums[i - 1]
                } else {
                    nums[i - 1] = nums[i]
                }
            }
            return change <= 1
        };
        checkPossibility([4, 2, 3]);
    </script>
</body>

</html>